<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Car Repayment Plan</title>
  <link rel="stylesheet" href="styles.css">

  <script defer src="/__/firebase/10.7.1/firebase-app-compat.js"></script>
  <script defer src="/__/firebase/10.7.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/10.7.1/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>

  <!-- <script defer src="index.js"></script> -->
</head>

<body>
  <div class="container">
    <div class="dashboard">
      <h2>Dashboard</h2>
      <div class="progress-container">
        <div class="progress-circle"></div>
        <div class="progress-fill" style="transform: rotate(45deg);"></div>
        <div class="progress-text">45%</div>
      </div>
    </div>

    <div class="entry-form">
      <h2>Enter Payment Record</h2>
      <form id="paymentForm">
        <label for="paymentDate">Date of payment:</label><br />
        <input type="date" id="paymentDate" name="payDate" value="2024-01-01" /><br />

        <label for="amount">Payment Amount:</label><br />
        <input type="int" id="amount" name="payAmount" value=3000 />

        <button type="button" onclick="submitPayment()">Submit Payment</button>
        <script>
          function submitPayment() {
            var paymentDate = document.getElementById('paymentDate').value;
            var amount = parseInt(document.getElementById('amount').value);

            // Validate input (you may want to add more validation)
            if (!paymentDate || isNaN(amount)) {
              alert("Please enter valid data and amount.");
              return;
            }

            // Add a new document to the 'paymentHistory' collection
            var paymentHistoryRef = firebase.firestore().collection('paymentHistory');
            paymentHistoryRef.add({
              date: new Date(paymentDate),
              amount: amount
            }).then(function () {
              // After adding the document, fetch data and regenerate the table
              fetchDataAndGenerateTable();
              // Optionally, you can clear the form
              document.getElementById('paymentForm').reset();
            }).catch(function (error) {
              console.error("Error adding document: ", error);
            });
          }
        </script>
      </form>
    </div>

    <div class="history-log-container">
      <h2>Payment History</h2>
      <div id="payment-log" class="history-log"></div>
      <script defer src="tableGen.js"></script>
    </div>
  </div>

  <!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
      const loadEl = document.querySelector('#load');
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
      // // The Firebase SDK is initialized and available here!
      //
      // firebase.auth().onAuthStateChanged(user => { });
      // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
      // firebase.firestore().doc('/foo/bar').get().then(() => { });
      // firebase.functions().httpsCallable('yourFunction')().then(() => { });
      // firebase.messaging().requestPermission().then(() => { });
      // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
      // firebase.analytics(); // call to activate
      // firebase.analytics().logEvent('tutorial_completed');
      // firebase.performance(); // call to activate
      //
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

      try {
        let app = firebase.app();
        let features = [
          'auth',
          'database',
          'firestore',
          'functions',
          'messaging',
          'storage',
          'analytics',
          'remoteConfig',
          'performance',
        ].filter(feature => typeof app[feature] === 'function');
        loadEl.textContent = `Firebase SDK loaded with ${features.join(', ')}`;
      } catch (e) {
        console.error(e);
        loadEl.textContent = 'Error loading the Firebase SDK, check the console.';
      }
    });
  </script> -->
</body>

</html>